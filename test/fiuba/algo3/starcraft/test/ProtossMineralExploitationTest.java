package fiuba.algo3.starcraft.test;

import static org.junit.Assert.*;

import org.junit.Test;

import fiuba.algo3.starcraft.logic.player.Player;
import fiuba.algo3.starcraft.logic.player.Resources;
import fiuba.algo3.starcraft.logic.structures.ExploitationStructure;
import fiuba.algo3.starcraft.logic.templates.NexoMineralTemplate;

public class ProtossMineralExploitationTest {

	@Test
	public void testPlayerStartWith200M() {
		Resources initialResources = new Resources(200,0);
		Player player = new Player(initialResources);
		assertEquals(player.getMineral(), 200);
	}
	
	@Test
	public void test1TurnAdds10MWith1NexoMineral() {
		Resources initialResources = new Resources(200,0);
		Player player = new Player(initialResources);
		NexoMineralTemplate templateNexo = new NexoMineralTemplate();
		ExploitationStructure nexoMineral = templateNexo.create();
		player.pays(50,0);
		player.newStructure(nexoMineral);
		
		player.newTurn();

		assertEquals(player.getMineral(), 160);
	}

	@Test
	public void test1TurnAdds40M4NexoMineral() {
		Resources initialResources = new Resources(200,0);
		Player player = new Player(initialResources);
		NexoMineralTemplate templateNexo = new NexoMineralTemplate();
		for(int i = 0; i < 4; i++) {
			ExploitationStructure nexoMineral = templateNexo.create();
			player.pays(50,0);
			player.newStructure(nexoMineral);
		}
	
		player.newTurn();
		
		assertEquals(player.getMineral(), 40);
	}

	@Test
	public void test30TurnsAdd1200MWith4NexoMineral() {
		Resources initialResources = new Resources(200,0);
		Player player = new Player(initialResources);
		NexoMineralTemplate templateNexo = new NexoMineralTemplate();
		for(int i = 0; i < 4; i++) {
			ExploitationStructure nexoMineral = templateNexo.create();	
			player.pays(50,0);
			player.newStructure(nexoMineral);
		}
	
		for(int i = 0; i < 30; i++) player.newTurn();
		
		assertEquals(player.getMineral(), 1200);
	}
	
	//TODO: Agregar pruebas para centros minerales destruidos!
}
