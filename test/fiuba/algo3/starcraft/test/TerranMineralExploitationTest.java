package fiuba.algo3.starcraft.test;

import static org.junit.Assert.*;

import org.junit.Test;

import fiuba.algo3.starcraft.logic.player.Player;
import fiuba.algo3.starcraft.logic.player.Resources;
import fiuba.algo3.starcraft.logic.structures.ExploitationStructure;
import fiuba.algo3.starcraft.logic.templates.CentroMineralTemplate;

public class TerranMineralExploitationTest {

	@Test
	public void testPlayerStartWith200M() {
		Resources initialResources = new Resources(200,0);
		Player player = new Player(initialResources);
		assertEquals(player.getMineral(), 200);
	}
	
	@Test
	public void test1TurnAdds10MWith1CentroMineral() {
		Resources initialResources = new Resources(200,0);
		Player player = new Player(initialResources);
		CentroMineralTemplate templateCenter = new CentroMineralTemplate();
		ExploitationStructure mineralCenter = templateCenter.create();
		player.pays(50,0); //Centro mineral cuesta 50M
		player.newStructure(mineralCenter);
		
		player.newTurn();

		assertEquals(player.getMineral(), 160);
	}

	@Test
	public void test1TurnAdds40MWith4CentroMineral() {
		Resources initialResources = new Resources(200,0);
		Player player = new Player(initialResources);
		CentroMineralTemplate templateCenter = new CentroMineralTemplate();
		for(int i = 0; i < 4; i++) {
			ExploitationStructure mineralCenter = templateCenter.create();		
			player.pays(50,0);
			player.newStructure(mineralCenter);
		}
	
		player.newTurn();
		
		assertEquals(player.getMineral(), 40);
	}

	@Test
	public void test30TurnsAdd1200MWith4CentroMineral() {
		Resources initialResources = new Resources(200,0);
		Player player = new Player(initialResources);
		CentroMineralTemplate templateCenter = new CentroMineralTemplate();
		for(int i = 0; i < 4; i++) {
			ExploitationStructure mineralCenter = templateCenter.create();		
			player.pays(50,0);
			player.newStructure(mineralCenter);
		}
	
		for(int i = 0; i < 30; i++) player.newTurn();
		
		assertEquals(player.getMineral(), 1200);
	}
	
	//TODO: Agregar pruebas para centros minerales destruidos!
}
